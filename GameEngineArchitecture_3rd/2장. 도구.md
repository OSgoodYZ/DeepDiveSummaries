## 2장: 도구
앞으로 두개의 장에서는 필요한 소프트웨어 엔지니러일 이론과 실제를 살펴본다. 2장에서는 개발자들이 널리 사용하는 툴을 살펴보고, 3장에서는 다양한 디자인 패턴, 대규모 C++ 프로그래밍의 핵심 개념을 짚어 본다.

### 2.1 버전 컨트롤
공유 파일들을 여러 사용자가 함께 작업할 수 있게 도와주는 도구를 버전 컨트롤 시스템이라고 한다.

#### 2.1.2 널리 쓰이는 버전 컨트롤 시스템
- SCCS와 RCS : 소스 코드 컨트롤 시스템과 리비전 컨트롤 시스템은 가장 오래된 버전 컨트롤 시스템이다. 둘 다 커맨드라인 기반이고, 주로유닉스 환경에서 쓰인다.
- CVS : Concurrent Version System, 커맨드라인 기반이다.
- Subversion: 오픈소스이고 CVS를 개량해서 대체할 목적으로 만들어졌다. 윈도우용으로 TortoiseSVN처럼 쓸 만한 클라이언트가 많고 맥용도 마찬가지다.
- Git: 분산형 버전 컨트롤 시스템이다.
- 퍼포스: Perforce, 변경 리스트 기능이 유명하다.
- NxN 에일리언브레인: 개인 개발에 특화된 버전 컨트롤시스템
- 크리어케이스
- 마이크로소프트 비주얼 소스세이프

### 2.2 컴파일러, 링커, IDE
c++ 같은 컴파일 언어를 갖고 있는 실행 프로그램을 만들려면 컴파이러와 링커가 필요하다.

#### 2.2.1 소스 파일, 헤더 파일, 번역 단위
소스파일은 기술적 용어로 번역단위(translation unit)라고 부르기도 한다.  
헤더 파일은 특수한 형태의 소스파일로, 타입 선언, 함수 프로토타입 같은 정보를 번역 단위 간에 공유하는 데 쓰인다. C++ 전처리기가 컴파일에 앞서 모든 #include 헤더 내용을 교체해 넣는다. 전처리기 덕분에 컴파일러는 번역 단위만 다루면 된다.

#### 2.2.2 라이브러리, 실행 파일 ,동적 링크 라이브러리
번역 단위 1개가 컴파일된 결과물인 기계어는 Object 파일에 저장된다. O파일은 다음과 같은 특징이 있다.
- 재배치 가능 : 코드가 위치할 메모리 주소가 아직 결정되지 않은 상태다.
- 링크되지 않음 : o파일 안에 들어 있지 않은 외부 참조 함수나 전역 데이터가 아직 확정되지 않았다.  

**라이브러리**는 다수의 o파일의 모음이다. o파일과 라이브러리가 **링크** 과정을 거치면 실행 파일로 변환된다. 외부 참조나 메모리 주소값을 확정한 상태를 실행 파일이라고 한다. 링커는 아래와 같은 역할을 한다.  
- 모든 기계어 명령어의 최종 상대 주소를 계산한다.
- 각 번역 단위(o파일) 에서 확정하지 못한 외부 함수나 전역 데이터의 값을 확정한다.

동적 링크 라이브러리는 정적 라이브러리와 실행 파일의 중간 형태를 띈다. 실행 파일이 DLL을 사용하려면 '부분적으로 링크된 partially linked' 기계어 코드가 있어야 한다. 링크를 거치면 대부분의 함수와 데이터에 대한 메모리 주소가 결정되지만 DLL 안에 포함된 함수에 대한 참조는 결정되지 않는다. 나중에 실행 파일을 실행할 때 운영체제에서 참조가 결정됮 않는 함수들을 찾아 필요한 DLL을 메모리에 로드한 후 참조 값을 갱신한다.

#### 2.2.5 코드 디버깅
해당 장에서는 여러가지 유용한 디버깅 팁 몇 가지와 기술들을 살펴본다. 

##### 최적화된 빌드 디버깅
Release 빌드에서만 발생하는 버그는 찾기 매우 힘들다. 
- 릴리즈에서만 생기는 버그는 변수를 초기화 하지않아 생기는 경우가 많다. 디버그 버전에서는 할당 메모리가 0으로 초기화 되는 경우가 많지만 릴리즈 버전은 그렇지 않기 때문이다.
- 실수로 릴리즈 빌드에서 코드가 생략되는 경우
- 디버그와 릴리즈 빌드 간의 자료구조 패킹이 다를 때ㅡ
- 인라인 함수나 컴파일러 최적화 때문에 생기는 버그
- 컴파일러 최적화 자체의 버그

이러한 릴리즈 빌드로 디버깅하는 기술은 꼭 익혀야 하고 다음과 같다.
- **디버거의 디스어셈블리를 읽을 줄 아는 능력 키우기** : 디스어셈블리를 통해 보면 순서대로 프로그램이 실행되기 때문이다.
- **레지스터를 해석해 변수 값이나 메모리 주소를 알아내기**
- **주소만 갖고 변수나 객체의 내용을 알아내기**
- **정적 변수와 전역 변수를 활용하기** : 릴리즈 빌드라도 보통 정적 변수와 전역 변수 정도는 디버거로 살펴볼 수 있다.
- **코드를 고치기** : 코드 자체를 수정해서 해당 현상을 관찰해보고 수정할 수 있다.

### 2.3 프로파일링 툴
프로파일러는 크게 두 가지 부류로 나눌 수 있다.
1. 통계 방식 프로파일러
2. 인스트루먼트 방식의 프로파일러

#### 프로파일러
다음 사이트에서 다양한 프로파일러 도구를 확인할 수 있다.
https://en.wikipedia.org/wiki/List_of_performance_analysis_tools

### 메모리 누수와 오염 감지
- IMG의 래셔널 퓨리파이
- 파라소프트의 Insure++
- 밸그린드

### 2.5 기타 툴
- 비교툴
- 3자 합치기 툴
- 헥스 에디터


